# About

original this:
https://github.com/windsorschmidt/stm32cubemx-cmake

differences only added stm32f103 series

This is a collection CMake build scripts used to build code generated by the STM32CubeMX tool from STMicroelectronics.

STM32CubeMX currently exports build files for a few embedded-centric IDEs, which is not so helpful for people using gcc *from the command-line* or in my case, inside Emacs. I have added my own attempt at a CMake build script to handle generating a firmware binary, and flashing it to a development board using OpenOCD.

*CMakeLists.txt* here is the only noteworthy file; the generated firmware source code is simply convenient for testing the build process. Using this script with other targets should be a matter of using STM32CubeMX to generate code for your target, changing some file paths, and adjusting your compiler/linker flags.

Prerequisites:

- Linux (OSX untested but should be usable)
- GNU ARM toolchain (i.e. arm-none-eabi-gcc, etc. are available)
- OpenOCD (and R/W permissions to the USB device)

Compiling and flashing to target:

```
$ mkdir -p example/build
$ cp STM32F103C8_CMakeLists.txt example/CMakeLists.txt
$ cp STM32F103C8.ioc example/
$ using STM32CubeMX to generate code:
$ cd example/build
$ cmake ..
$ make
$ make flash
```

# Exporting Your Projects from STM32CubeMX

Select the *SW4STM32* IDE/toolchain from the when exporting your project.

# References

[STM32CubeMX](http://www.st.com/content/st_com/en/products/development-tools/software-development-tools/stm32-software-development-tools/stm32-configurators-and-code-generators/stm32cubemx.html)

[NUCLEO-F042K6 development board](http://www.st.com/content/st_com/en/products/evaluation-tools/product-evaluation-tools/mcu-eval-tools/stm32-mcu-eval-tools/stm32-mcu-nucleo/nucleo-f042k6.html)

[OpenOCD](http://openocd.org/)

# License

MIT license unless designated otherwise. Generated files maintain their original licenses. Contributions welcome.
